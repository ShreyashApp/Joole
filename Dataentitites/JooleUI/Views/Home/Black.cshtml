@model IEnumerable<JooleUI.Models.Products>

@{
    ViewBag.Title = "Black";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Product Compare</h2>

<table class="table" id="table" border="1">
    <tbody></tbody>
</table>

@section scripts{
    <script>
        $(document).ready(function () {
            $.ajax({
                type: "POST",
                url: "/Home/Blacks",
                data: "",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    var i = 0;
                    var dats = JSON.parse(response);
                    i = i + 1;
                    $("tbody").append("<tr id='th" + i + "'><td></td></tr>");
                    $.each(dats, function (key, val) {
                        $("#th" + i).append("<td colspan='2' id = 'tdf'>" + val.Product_Image + "</td>");
                    });
                    $("tbody").append("<tr id='thz'><th>Description</th></tr>");
                    i = i + 1;
                    $("tbody").append("<tr id='th" + i + "'><th>Product_Name</th></tr>");
                    $.each(dats, function (key, val) {
                        $("#th" + i).append("<td colspan='2' id = 'tdf'>" + val.Product_Name + "</td>");

                    });
                    i = i + 1;
                    $("tbody").append("<tr id='th" + i + "'><th>Series</th></tr>");
                    $.each(dats, function (key, val) {
                        $("#th" + i).append("<td colspan='2' id = 'tdf'>" + val.Series + "</td>");
                    });
                    i = i + 1;
                    $("tbody").append("<tr id='th" + i + "'><th>Manufacturer Name</th></tr>");
                    $.each(dats, function (key, val) {
                        $("#th" + i).append("<td colspan='2' id = 'tdf'>" + val.Manufacturer_Name + "</td>");
                    });
                    $("tbody").append("<tr  id='thy'><th>Technical Specification</th></tr>");
                    i = i + 1;
                    $.each(dats, function (key, val) {
                        var ks = 0;
                        var obs = JSON.parse(val.Object);
                        $.each(obs, function (keys, vale) {
                            if ($("#" + ks).length == 0)
                                $("tbody").append("<tr id='" + ks + "'><th>" + keys + "</th></tr>");
                            var j = 0;
                            if (obs[keys].length > 1) {
                                while (j < obs[keys].length) {
                                    $('#' + ks).append("<td id = 'tdf'>" + obs[keys][j] + "</td>");
                                    j++;
                                    console.log(obs[keys]);
                                }
                            } else {
                                $('#' + ks).append("<td colspan='2' id = 'tdf'>" + obs[keys] + "</td>");
                            }
                            ks = ks + 1;

                        });
                    });
                    i = i + 1;
                    $("tbody").append("<tr id='th" + i + "'><th>Model</th><tr>");
                    $.each(dats, function (key, val) {
                        $("#th" + i).append("<td colspan='2' id = 'tdf'>" + val.Model + "</td>");
                    });
                    i = i + 1;
                    $("tbody").append("<tr id='th" + i + "'><th>Manufacturer Name</th><tr>");
                    $.each(dats, function (key, val) {
                        $("#th" + i).append("<td colspan='2' id = 'tdf'>" + val.ModelYear + "</td>");
                    });
                    i = i + 1;
                    $("tbody").append("<tr id='th" + i + "'><th>Manufacturer Name</th></tr>");
                    $.each(dats, function (key, val) {
                        $("#th" + i).append("<td colspan='2' id = 'tdf'>" + val.Application + "</td>");
                    });
                    i = i + 1;
                    $("tbody").append("<tr id='th" + i + "'><th>Manufacturer Name</th></tr>");
                    $.each(dats, function (key, val) {
                        $("#th" + i).append("<td colspan='2' id = 'tdf'>" + val.MountingLocation + "</td>");
                    });
                    i = i + 1;
                    $("tbody").append("<tr id='th" + i + "'><th>Manufacturer Name</th></tr>");
                    $.each(dats, function (key, val) {
                        $("#th" + i).append("<td colspan='2' id = 'tdf'>" + val.UseType + "</td>");
                    });
                    console.log(response + "Hello");
                },
                failure: function (response) {
                    console.log(response + "Hello1");
                },
                error: function (response) {
                    console.log(response + "Hello2");
                    var dats = JSON.parse(response);
                    $.each(dats, function (key, val) {
                        $("tbody").append("<tr><td id = 'tdf" + i + "'>" + val.Product_ID + "</td>" +
                            "<td id = 'tdl" + i + "'>" + val.Manufacturer_Name + "</td>" +
                            "<td id = 'tde" + i + "'>" + val.Series + "</td>" +
                            "<td id = 'tdlo" + i + "'>" + val.Model + "</td></tr>");
                    });
                }
            });
        });
    </script>

    }